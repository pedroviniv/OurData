CREATE TABLE DATASET(
   ID TEXT,
   AUTHOR TEXT,
   AUTHOR_EMAIL TEXT,
   CREATOR_USER_ID TEXT,
   LICENSED_ID TEXT,
   LICENSED_TITLE TEXT,
   LICENSED_URL TEXT,
   MAINTAINER TEXT,
   MAINTAINER_EMAIL TEXT,
   METADATA_CREATED TIMESTAMP,
   METADATA_MODIFIED TIMESTAMP,
   NAME TEXT,
   NOTES TEXT,
   NOTES_RENDERED TEXT,
   NUM_RESOURCES INT,
   NUM_TAGS INT,
   OWNER_ORG TEXT,
   REVISION_ID TEXT, 
   REVISION_TIMESTAMP TIMESTAMP,
   STATE TEXT,
   TITLE TEXT,
   TYPE TEXT,
   URL TEXT,
   VERSION TEXT,
   IS_OPEN BOOLEAN,
   IS_PRIV BOOLEAN
);

CREATE TABLE RESOURCE(
   ID TEXT,
   CACHE_LAST_UPDATED TEXT,
   CACHE_URL TEXT,
   CREATED TIMESTAMP,
   DESCRIPTION TEXT,
   FORMAT TEXT,
   HASH TEXT,
   LAST_MODIFIED TEXT,
   MIMETYPE TEXT,
   MIMETYPE_INNER TEXT,
   NAME TEXT,
   OWNER TEXT,
   ID_DATASET TEXT,
   POSITION INT,
   RESOURCE_GROUP_ID TEXT,
   RESOURCE_TYPE TEXT,
   REVISION_ID TEXT,
   REVISION_TIMESTAMP TEXT,
   SIZE TEXT,
   STATE TEXT,
   URL TEXT,
   URL_TYPE TEXT,
   WEBSTORE_LAST_UPDATED TIMESTAMP,
   WEBSTORE_URL TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE TAGS(
   ID TEXT,
   DISPLAY_NAME TEXT,
   NAME TEXT,
   REVISION_TIMESTAMP TIMESTAMP,
   STATE TEXT,
   VOCABULARY_ID TEXT
);

CREATE TABLE DATASET_TAGS(
   ID_DATASET TEXT,
   ID_TAGS TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID),
   FOREIGN KEY(ID_TAGS) REFERENCES TAGS(ID)
);

CREATE TABLE DATASET_RESOURCES(
   ID_DATASET TEXT,
   ID_RESOURCE TEXT, 
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID),
   FOREIGN KEY(ID_RESOURCE) REFERENCES RESOURCE(ID)
);


CREATE TABLE DATASET_OTHERS(
   KEY TEXT,
   VALUE TEXT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE RESOURCE_OTHERS(
   KEY TEXT,
   VALUE TEXT,
   ID_RESOURCE TEXT,
   FOREIGN KEY(ID_RESOURCE) REFERENCES RESOURCE(ID)
);

CREATE TABLE ACTIVITY(
   ID TEXT,
   APPROVED_TIMESTAMP TIMESTAMP,
   AUTHOR TEXT,
   MESSAGE TEXT,
   STATE TEXT,
   TIMESTAMP TIMESTAMP
);

CREATE TABLE ORGANIZATION(
   ID TEXT,
   APPROVAL_STATUS TEXT,
   CREATED TIMESTAMP,
   DESCRIPTION TEXT,
   DISPLAY_NAME TEXT,
   IMAGE_DISPLAY_URL TEXT,
   IMAGE_URL TEXT,
   NAME TEXT,
   NUM_FOLLOWERS INT,
   DATASET_COUNT INT,
   REVISION_ID TEXT,
   STATE TEXT,
   TITLE TEXT,
   TYPE TEXT,
   IS_ORGANIZATION BOOLEAN,
   NAME_OR_ID TEXT
);

CREATE TABLE DATASET_RELATIONSHIP_AS_OBJECT(
   ID TEXT,
   COMMENT TEXT,
   OBJECT TEXT,
   SUBJECT TEXT,
   TYPE TEXT
);

CREATE TABLE DATASET_RELATIONSHIP_AS_SUBJECT(
   ID TEXT,
   COMMENT TEXT,
   OBJECT TEXT,
   SUBJECT TEXT,
   TYPE TEXT
);

CREATE TABLE DATASET_DATASET_RELATIONSHIP_AS_OBJECT(
   ID_DATASET_RELATIONSHIP_AS_OBJECT TEXT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_DATASET_RELATIONSHIP_AS_OBJECT) REFERENCES DATASET_RELATIONSHIP_AS_OBJECT(ID),
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE DATASET_DATASET_RELATIONSHIP_AS_SUBJECT(
   ID_DATASET_RELATIONSHIP_AS_SUBJECT TEXT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_DATASET_RELATIONSHIP_AS_SUBJECT) REFERENCES DATASET_RELATIONSHIP_AS_SUBJECT(ID),
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE DATASET_ORGANIZATION(
   ID_ORGANIZATION TEXT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_ORGANIZATION) REFERENCES ORGANIZATION(ID),
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE GROUP(
   ID TEXT,
   APPROVAL_STATUS TEXT,
   CREATED TIMESTAMP,
   DESCRIPTION TEXT,
   DISPLAY_NAME TEXT,
   IMAGE_DISPLAY_URL TEXT,
   IMAGE_URL TEXT,
   NAME TEXT,
   NUM_FOLLOWERS INT,
   DATASET_COUNT INT,
   REVISION_ID TEXT,
   STATE TEXT,
   TITLE TEXT,
   TYPE TEXT,
   IS_ORGANIZATION BOOLEAN,
   NAME_OR_ID TEXT
);

CREATE TABLE DATASET_EXTRA(
   KEY TEXT,
   VALUE TEXT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE ORGANIZATION_EXTRA(
   KEY TEXT,
   VALUE TEXT,
   ID_ORGANIZATION TEXT,
   FOREIGN KEY(ID_ORGANIZATION) REFERENCES ORGANIZATION(ID)
);

CREATE TABLE GROUP_EXTRA(
   KEY TEXT,
   VALUE TEXT,
   ID_GROUP TEXT,
   FOREIGN KEY(ID_GROUP) REFERENCES GROUP(ID)
);


CREATE TABLE DATASET_GROUP(
   ID_DATASET TEXT,
   ID_GROUP TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID),
   FOREIGN KEY(ID_GROUP) REFERENCES GROUP(ID)
);

CREATE TABLE GROUP_GROUPS(
   ID_GROUP_PARENT TEXT,
   ID_GROUP_SON TEXT,
   FOREIGN KEY(ID_GROUP_PARENT) GROUP(ID),
   FOREIGN KEY(ID_GROUP_SON) GROUP(ID)
);

CREATE TABLE ORGANIZATION_GROUPS(
   ID_ORGANIZATION TEXT,
   ID_GROUP TEXT,
   FOREIGN KEY(ID_ORGANIZATION) REFERENCES ORGANIZATION(ID),
   FOREIGN KEY(ID_GROUP) REFERENCES GROUP(ID)
);


CREATE TABLE TAG(
   ID TEXT,
   DISPLAY_NAME TEXT,
   NAME TEXT,
   REVISION_TIMESTAMP TIMESTAMP,
   STATE TEXT,
   VOCABULARY_ID TEXT
);

CREATE TABLE DATASET_TRACKING_SUMMARY(
   RECENTE INT,
   TOTAL INT,
   ID_DATASET TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID)
);

CREATE TABLE RESOURCE_TRACKING_SUMMARY(
   RECENTE INT,
   TOTAL INT,
   ID_RESOURCE TEXT,
   FOREIGN KEY(ID_RESOURCE) REFERENCES RESOURCE(ID)
);

CREATE TABLE USER(
   ID TEXT,
   ABOUT TEXT,
   CAPACITY TEXT,
   CREATED TIMESTAMP,
   DISPLAY_NAME TEXT,
   EMAIL TEXT,
   EMAIL_HASH TEXT,
   FULL_NAME TEXT,
   NAME TEXT,
   NUM_FOLLOWERS INT,
   NUMBER_ADMINISTERED_PACKAGES INT,
   NUMBER_OF_EDITS INT,
   OPEN_ID TEXT,
   PASSWORD TEXT,
   STATE TEXT,
   IS_ACTIVITY_STREAMS_EMAIL_NOTIFICATIONS BOOLEAN,
   IS_SYS_ADMIN BOOLEAN
);

CREATE TABLE GROUP_USERS(
   ID_USER TEXT,
   ID_GROUP TEXT,
   FOREIGN KEY(ID_USER) REFERENCES USER(ID),
   FOREIGN KEY(ID_GROUP) REFERENCES GROUP(ID)
);

CREATE TABLE ORGANIZATION_USERS(
   ID_USER TEXT,
   ID_ORGANIZATION TEXT,
   FOREIGN KEY(ID_USER) REFERENCES USER(ID),
   FOREIGN KEY(ID_ORGANIZATION) REFERENCES ORGANIZATION(ID)
);

CREATE TABLE ACTIVITY(
   ID TEXT,
   APPROVED_TIMESTAMP TIMESTAMP,
   AUTHOR TEXT,
   MESSAGE TEXT,
   STATE TEXT,
   TIMESTAMP TIMESTAMP
);

CREATE TABLE ACTIVITY_GROUP(
   ID_ACTIVITY TEXT,
   GROUP TEXT,
   FOREIGN KEY(ID_ACTIVITY) REFERENCES ACTIVITY(ID)
);

CREATE TABLE DATASET_ACTIVITY(
   ID_DATASET TEXT,
   ID_ACTIVITY TEXT,
   FOREIGN KEY(ID_DATASET) REFERENCES DATASET(ID),
   FOREIGN KEY(ID_ACTIVITY) REFERENCES ACTIVITY(ID)
);

CREATE TABLE USER_ACTIVITY(
   ID_USER TEXT,
   ID_ACTIVITY TEXT,
   FOREIGN KEY(ID_USER) REFERENCES USER(ID),
   FOREIGN KEY(ID_ACTIVITY) REFERENCES ACTIVITY(ID)
);

33 tables

